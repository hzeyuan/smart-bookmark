# LangGraph Smart WebRPA

> ç”¨ LLM + æµè§ˆå™¨æ‰“é€ ä½ ä¸“å±çš„ä¿¡æ¯æµåŠ©æ‰‹

> **å®šä½**ï¼šé¢å‘â€œä¿¡æ¯æµç±»ç«™ç‚¹â€ï¼ˆB ç«™ã€Twitter/Xã€å°çº¢ä¹¦ â€¦ï¼‰çš„ä¸ªäººåŒ–è‡ªåŠ¨é˜…è¯»å·¥å…·ã€‚\
> **ç‰¹è‰²**ï¼šLLM ç”Ÿæˆæ“ä½œ â†’ Playwright çœŸå®æµè§ˆ â†’ Markdown/CSV è¡¨æ ¼æ¨é€ã€‚\
> **å·®å¼‚åŒ–**ï¼šèšç„¦æ—¶é—´çº¿å†…å®¹ã€å¼ºè°ƒé«˜æˆåŠŸç‡ä¸ç»“æœå¯è¯»æ€§ï¼Œè€Œéé€šç”¨ç½‘é¡µçˆ¬è™«ã€‚

---

## 1. ä¸ºä»€ä¹ˆè¦åšï¼Ÿ

- ç¤¾äº¤åª’ä½“ä¿¡æ¯çˆ†ç‚¸ï¼Œäººå·¥åˆ·æµæµªè´¹æ—¶é—´ã€‚
- é€šç”¨ä¿¡æ¯èšåˆå·¥å…·æ¨èçš„æ˜¯â€œå¤§ä¼—çƒ­é—¨â€ï¼Œä¸ç­‰äºä½ æ„Ÿå…´è¶£çš„ã€‚
- æˆ‘ä»¬æƒ³åšçš„æ˜¯ï¼šAI èƒ½åƒä½ ä¸€æ ·å»åˆ·å¸¸ç”¨ç«™ç‚¹ï¼Œä¸ºä½ æŒ‘å‡ºçœŸæ­£ç›¸å…³å†…å®¹ã€‚
- è¿™äº›ç«™ç‚¹ API ä¸å¼€æ”¾æˆ–é€Ÿç‡å—é™ï¼Œç”¨æµè§ˆå™¨æ¨¡æ‹Ÿæœ€ç¨³ã€‚
- å€ŸåŠ© LLM è‡ªåŠ¨ç”Ÿæˆæ­¥éª¤ï¼Œç”¨æˆ·ä¸ç”¨å†™è„šæœ¬ã€‚
- **æˆ‘ä»¬ä¸åº”è¢«æ¨èç®—æ³•è£¹æŒŸï¼Œè€Œæ˜¯å–„ç”¨å®ƒæ¥æœåŠ¡æˆ‘ä»¬çš„æˆé•¿ç›®æ ‡ã€‚**
- æ¯”å¦‚ä½ æƒ³å­¦ä¹  AIï¼Œé‚£å°±åº”å°½å¯èƒ½æ”¶é›† AI é¢†åŸŸçš„æœ€æ–°ä¼˜è´¨å†…å®¹ï¼Œè€Œä¸ä»…ä»…è¢«ç®—æ³•å¸å¼•å»åˆ·å¨±ä¹å†…å®¹ã€‚

### 1.1 ä½¿ç”¨åœºæ™¯ï¼ˆæˆ‘ä»¬ä¸ºè°æœåŠ¡ï¼Ÿï¼‰

- æ²¡æ—¶é—´åˆ· B ç«™ / X / å°çº¢ä¹¦ï¼Œä½†åˆä¸æƒ³é”™è¿‡é‡è¦å†…å®¹ã€‚
- å¸Œæœ›æœ‰ã€Œåªä¸ºæˆ‘å‡†å¤‡ã€çš„ç²¾é€‰åˆ—è¡¨ï¼Œè€Œä¸æ˜¯åƒç¯‡ä¸€å¾‹çš„æ¨èã€‚
- å¸Œæœ›æ¯å¤©æ—©æ™šå›ºå®šæ”¶åˆ°ä¸€ä»½å†…å®¹æ‘˜è¦ï¼Œè€Œæ— éœ€æ‰‹åŠ¨æ‰“å¼€ç½‘ç«™ã€‚
- æƒ³ä» AI é‚£é‡Œè·å–ç­›é€‰è¿‡çš„ä¿¡æ¯ï¼Œè€Œä¸æ˜¯æµ·é‡åŸå§‹æ•°æ®ã€‚
- æœ‰æ˜ç¡®çš„å…´è¶£/å­¦ä¹ ç›®æ ‡ï¼Œæƒ³èšç„¦è¿™ç±»å†…å®¹è¿›è¡Œé•¿æœŸè¿½è¸ªã€‚

---

## 2. æŠ€æœ¯æ ˆä¸€è§ˆ

| å±‚çº§     | Python è·¯çº¿ï¼ˆé»˜è®¤ï¼Œæœ€å¿«è½åœ°ï¼‰        | TypeScript è·¯çº¿ï¼ˆå¯é€‰ï¼‰             |
| ------ | ------------------------- | ----------------------------- |
| æ™ºèƒ½ä½“æ¡†æ¶  | **LangGraph** + LangChain | LangChainJS + è‡ªç ” DAG æˆ– xstate |
| æµè§ˆå™¨æ§åˆ¶  | **Playwright Python**     | Playwright NodeJS             |
| æœåŠ¡ç«¯    | FastAPI (Webhook)         | Next.js / Express             |
| è‡ªåŠ¨åŒ–å¹³å°  | n8n / Zapier Webhook      | åŒå·¦                            |
| UIï¼ˆå¯é€‰ï¼‰ | mkdocs-material / React   | Next.js / SvelteKit           |

> **æ¨è**ï¼šå…ˆç”¨ Python è·¯çº¿åœ¨ 1 å‘¨å†…è·‘é€š MVPï¼Œå†æŒ‰éœ€è¡¥ TS ç‰ˆæœ¬ã€‚

---

## 3. ç‰ˆæœ¬é‡Œç¨‹ç¢‘

### ğŸš€ V0 â€” CLIâ€¯æŒ‰éœ€æ‹‰å–ï¼ˆMVPï¼‰

| ç›®æ ‡                                        | æŠ€æœ¯ç‚¹                                        | äº¤ä»˜ç‰©                                                         |
| ----------------------------------------- | ------------------------------------------ | ----------------------------------------------------------- |
| `read bilibili` è·å–çƒ­é—¨/å…³æ³¨æµ â†’ è¾“å‡º Markdown è¡¨æ ¼ | LLMPlanner â†’ BrowserAgent â†’ TableFormatter | `examples/bilibili_hot.py`ã€`outputs/2024-xx-xx/bilibili.md` |

### ğŸ”„ V1 â€” å®šæ—¶æ¨é€

| ç›®æ ‡                                                    | æŠ€æœ¯ç‚¹                            | äº¤ä»˜ç‰©                       |
| ----------------------------------------------------- | ------------------------------ | ------------------------- |
| åå° cron æ¯æ—¥ 8â€¯AM / 8â€¯PM æŠ“å– â†’ Webhook åˆ° n8n â†’ é‚®ä»¶/Notion | `scheduler.py` + WebhookSender | `outputs/` è‡ªåŠ¨æ›´æ–°ï¼Œn8n å·¥ä½œæµæ¨¡æ¿ |

### ğŸ¯ V2 â€” ä¸ªæ€§åŒ–æ’åº

| ç›®æ ‡                      | æŠ€æœ¯ç‚¹           | äº¤ä»˜ç‰©                         |
| ----------------------- | ------------- | --------------------------- |
| æ ¹æ®ç”¨æˆ·ç‚¹å‡»/åœç•™å­¦ä¹ ä½œè€…äº²è¿‘åº¦ â†’ æ’åºæ¨é€ | ç®€æ˜“æ‰“åˆ†æ¨¡å‹ + ç‚¹å‡»æ—¥å¿— | `profiles/user.json`ã€æ’åºæ•ˆæœæŠ¥å‘Š |

### ğŸ“Š V3 â€” Web ä»ªè¡¨ç›˜

| ç›®æ ‡                | æŠ€æœ¯ç‚¹                          | äº¤ä»˜ç‰©                |
| ----------------- | ---------------------------- | ------------------ |
| åœ¨çº¿æŸ¥çœ‹ / æ ‡è®°ã€Œæœ‰ç”¨ã€ã€Œæ— ç”¨ã€ | FastAPI + React (or Next.js) | `/dashboard` å¯äº¤äº’ç•Œé¢ |

> ğŸ“ è¶…å‡ºèŒƒå›´çš„åŠŸèƒ½ï¼ˆç‚¹èµå»é‡ã€å·¥ä½œæµå›æ”¾ï¼‰æ”¾å…¥ Backlogï¼ŒæŒ‰éœ€æ±‚å†æã€‚

---

## 4. MVP æ¨¡å—ï¼ˆV0ï¼‰

| æ¨¡å—                      | èŒè´£                                                     |
| ----------------------- | ------------------------------------------------------ |
| **LLMPlannerAgent**     | å°†è‡ªç„¶è¯­è¨€æŒ‡ä»¤è½¬ `ActionPlan` JSON                             |
| **BrowserAgent**        | Playwright æ‰§è¡Œ `goto / click / scroll / wait / extract` |
| **FetcherAgent**        | è°ƒç”¨ BrowserAgentï¼Œè¿”å›æ¡ç›®åˆ—è¡¨                                 |
| **TableFormatterAgent** | æ¸²æŸ“ Markdown/CSV è¡¨æ ¼                                     |

**æˆåŠŸåˆ¤å®š**ï¼š

1. è¿è¡Œ CLI è„šæœ¬å `outputs/` æœ‰è¡¨æ ¼ï¼›
2. ç»ˆç«¯æç¤º `âœ… å·²æŠ“å– N æ¡`ã€‚

---

## 5. æµç¨‹æ¶æ„ï¼ˆV0ï¼‰

```mermaid
graph TD
    A(ç”¨æˆ·æŒ‡ä»¤) --> B[LLMPlanner]
    B --> C(ActionPlan)
    C --> D[Fetcher]
    D --> E[BrowserAgent]
    E --> F[ç»“æœåˆ—è¡¨]
    F --> G[TableFormatter]
    G --> H{{Markdown/CSV}}
```

> V1 å°†åœ¨ G â†’ H ä¹‹é—´åŠ  **WebhookSender**ï¼›V2 å¢åŠ  **Ranker** èŠ‚ç‚¹ã€‚

---

## 6. é¡¹ç›®ç›®å½•ï¼ˆå»ºè®®ï¼‰

```
.
â”œâ”€ agents/
â”‚   â”œâ”€ llm_planner.py
â”‚   â”œâ”€ browser_agent.py
â”‚   â”œâ”€ fetcher_agent.py
â”‚   â”œâ”€ formatter_agent.py
â”‚   â””â”€ scheduler.py          # V1
â”œâ”€ prompts/
â”œâ”€ outputs/
â”œâ”€ examples/
â”‚   â”œâ”€ bilibili_hot.py
â”‚   â”œâ”€ twitter_timeline.py
â”‚   â””â”€ xhs_hot.py
â”œâ”€ requirements.txt
â””â”€ README.md
```

---

## 7. å¿«é€Ÿå¼€å§‹ï¼ˆPythonï¼‰

```bash
# å…‹éš† & è¿›å…¥
$ git clone https://github.com/yourname/langgraph-smart-webrpa.git
$ cd langgraph-smart-webrpa

# è™šæ‹Ÿç¯å¢ƒ & ä¾èµ–
$ python -m venv .venv && source .venv/bin/activate
$ pip install -r requirements.txt
$ playwright install

# è®¾ç½® LLM KEY
$ export OPENAI_API_KEY=<your-key>

# è¿è¡Œ B ç«™ç¤ºä¾‹
$ python examples/bilibili_hot.py
```

---

## 8. åç»­ Backlog

- ç‚¹èµ/æ’­æ”¾é‡æ’åºã€å»é‡
- Selector è‡ªæ„ˆç®—æ³•
- Workflow å›æ”¾ / ç¤¾åŒºåº“
- å¤šç”¨æˆ·åå¥½å»ºæ¨¡ï¼ˆä½œè€…åå¥½ / å†…å®¹ç±»åˆ«ï¼‰
- ç§äººå…´è¶£é…ç½®é¢æ¿ï¼ˆå¯è§†åŒ–ï¼‰
- æ”¯æŒå‘¨æŠ¥/æœˆæŠ¥è‡ªåŠ¨æ•´ç†

---

## 9. è´¡çŒ® & è®¸å¯è¯

ï¼ˆç•¥ï¼‰

